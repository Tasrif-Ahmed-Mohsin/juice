:root {
  /* Primitive Color Tokens */
  --color-white: rgba(255, 255, 255, 1);
  --color-black: rgba(0, 0, 0, 1);
  --color-cream-50: rgba(252, 252, 249, 1);
  --color-cream-100: rgba(255, 255, 253, 1);
  --color-gray-200: rgba(245, 245, 245, 1);
  --color-gray-300: rgba(202, 138, 138, 1);     /* Soft desaturated red */
  --color-gray-400: rgba(168, 75, 75, 1);       /* Muted brownish red */
  --color-slate-500: rgba(120, 60, 60, 1);      /* Muted deep brown-red */
  --color-brown-600: rgba(94, 82, 64, 1);
  --color-charcoal-700: rgba(38, 20, 20, 1);    /* Deep brown-red for dark mode */
  --color-charcoal-800: rgba(31, 15, 15, 1);    /* Deeper brown-red for surfaces */
  --color-slate-900: rgba(70, 30, 30, 1);       /* Deep muted red-brown */
  --color-primary: rgba(179, 80, 80, 0.75);       /* MAIN PRIMARY */
  --color-primary-hover: rgba(150, 60, 60, 0.85); /* Hover */
  --color-primary-active: rgba(120, 45, 45, 0.92);/* Active */
  --color-secondary: rgba(202, 138, 138, 0.12);
  --color-secondary-hover: rgba(202, 138, 138, 0.2);
  --color-secondary-active: rgba(202, 138, 138, 0.25);
  --color-border: rgba(179,80,80,0.22);
  --color-btn-primary-text: var(--color-cream-50);
  --color-card-border: rgba(179,80,80,0.13);
  --color-card-border-inner: rgba(179,80,80,0.13);
  --color-error: var(--color-orange-500);
  --color-success: var(--color-primary);
  --color-warning: var(--color-orange-500);
  --color-info: var(--color-gray-300);
  --color-focus-ring: rgba(179,80,80,0.44);
  --color-select-caret: rgba(70,30,30,0.8);

  /* Shadows: use primary color for a warm effect */
  --shadow-xs: 0 1px 2px rgba(179,80,80,0.06);
  --shadow-sm: 0 1px 3px rgba(179,80,80,0.09), 0 1px 2px rgba(179,80,80,0.05);
  --shadow-md: 0 4px 6px -1px rgba(179,80,80,0.13),0 2px 4px -1px rgba(179,80,80,0.09);
  --shadow-lg: 0 10px 15px -3px rgba(179,80,80,0.17),0 4px 6px -2px rgba(179,80,80,0.11);

  /* Animation */
  --duration-fast: 150ms;
  --duration-normal: 250ms;
  --ease-standard: cubic-bezier(0.16, 1, 0.3, 1);
  --focus-ring: 0 0 0 3px var(--color-focus-ring);
  --focus-outline: 2px solid var(--color-primary);

  /* Border Radius */
  --radius-sm: 6px;
  --radius-base: 8px;
  --radius-md: 10px;
  --radius-lg: 12px;
  --radius-full: 9999px;

  /* Layout */
  --container-sm: 640px;
  --container-md: 768px;
  --container-lg: 1024px;
  --container-xl: 1280px;
}

/* Dark mode colors */
@media (prefers-color-scheme: dark) {
  :root {
    --color-gray-400-rgb: 168, 75, 75;
    --color-gray-300-rgb: 202, 138, 138;

    --color-bg-1: rgba(179, 80, 80, 0.15);
    --color-bg-2: rgba(230, 129, 97, 0.15);
    --color-bg-3: rgba(240, 190, 190, 0.15);
    --color-bg-4: rgba(168, 75, 75, 0.15);
    --color-bg-5: rgba(168, 75, 47, 0.15);
    --color-bg-6: rgba(255, 255, 255, 0.07);
    --color-bg-7: rgba(252, 252, 249, 0.07);
    --color-bg-8: rgba(120, 60, 60, 0.1);

    --color-background: var(--color-charcoal-700);
    --color-surface: var(--color-charcoal-800);
    --color-text: var(--color-gray-200);
    --color-text-secondary: rgba(var(--color-gray-300-rgb), 0.7);
    --color-primary: var(--color-primary);
    --color-primary-hover: var(--color-primary-hover);
    --color-primary-active: var(--color-primary-active);
    --color-secondary: rgba(var(--color-gray-400-rgb), 0.15);
    --color-secondary-hover: rgba(var(--color-gray-400-rgb), 0.25);
    --color-secondary-active: rgba(var(--color-gray-400-rgb), 0.3);
    --color-border: rgba(var(--color-primary-hover-rgb), 0.28);
    --color-error: var(--color-orange-400);
    --color-success: var(--color-primary);
    --color-warning: var(--color-orange-400);
    --color-info: var(--color-gray-300);
    --color-focus-ring: rgba(179,80,80,0.44);
    --color-btn-primary-text: var(--color-slate-900);
    --color-card-border: rgba(var(--color-primary-hover-rgb), 0.18);
    --color-card-border-inner: rgba(var(--color-primary-hover-rgb), 0.13);
    --shadow-inset-sm: inset 0 1px 0 rgba(255,255,255,0.1),inset 0 -1px 0 rgba(179,80,80,0.13);
    --color-select-caret: rgba(var(--color-gray-200-rgb), 0.8);
  }
}

/* Data attribute for manual theme switching */
[data-color-scheme="dark"] {
  --color-gray-400-rgb: 168, 75, 75;
  --color-gray-300-rgb: 202, 138, 138;

  --color-bg-1: rgba(179, 80, 80, 0.15);
  --color-bg-2: rgba(230, 129, 97, 0.15);
  --color-bg-3: rgba(240, 190, 190, 0.15);
  --color-bg-4: rgba(168, 75, 75, 0.15);
  --color-bg-5: rgba(168, 75, 47, 0.15);
  --color-bg-6: rgba(255, 255, 255, 0.07);
  --color-bg-7: rgba(252, 252, 249, 0.07);
  --color-bg-8: rgba(120, 60, 60, 0.1);

  --color-background: var(--color-charcoal-700);
  --color-surface: var(--color-charcoal-800);
  --color-text: var(--color-gray-200);
  --color-text-secondary: rgba(var(--color-gray-300-rgb), 0.7);
  --color-primary: var(--color-primary);
  --color-primary-hover: var(--color-primary-hover);
  --color-primary-active: var(--color-primary-active);
  --color-secondary: rgba(var(--color-gray-400-rgb), 0.15);
  --color-secondary-hover: rgba(var(--color-gray-400-rgb), 0.25);
  --color-secondary-active: rgba(var(--color-gray-400-rgb), 0.3);
  --color-border: rgba(var(--color-primary-hover-rgb), 0.28);
  --color-btn-primary-text: var(--color-slate-900);
  --color-card-border: rgba(var(--color-primary-hover-rgb), 0.18);
  --color-card-border-inner: rgba(var(--color-primary-hover-rgb), 0.13);
  --shadow-inset-sm: inset 0 1px 0 rgba(255,255,255,0.1),inset 0 -1px 0 rgba(179,80,80,0.13);
  --color-select-caret: rgba(var(--color-gray-200-rgb), 0.8);
}

[data-color-scheme="light"] {
  --color-gray-400-rgb: 168, 75, 75;
  --color-gray-300-rgb: 202, 138, 138;

  --color-bg-1: rgba(179, 80, 80, 0.08);
  --color-bg-2: rgba(230, 129, 97, 0.08);
  --color-bg-3: rgba(240, 190, 190, 0.08);
  --color-bg-4: rgba(168, 75, 75, 0.08);
  --color-bg-5: rgba(168, 75, 47, 0.08);
  --color-bg-6: rgba(252, 252, 249, 0.08);
  --color-bg-7: rgba(255, 255, 255, 0.08);
  --color-bg-8: rgba(120, 60, 60, 0.08);

  --color-background: var(--color-cream-50);
  --color-surface: var(--color-cream-100);
  --color-text: var(--color-slate-900);
  --color-text-secondary: var(--color-slate-500);
  --color-primary: var(--color-primary);
  --color-primary-hover: var(--color-primary-hover);
  --color-primary-active: var(--color-primary-active);
  --color-secondary: rgba(var(--color-gray-300-rgb), 0.12);
  --color-secondary-hover: rgba(var(--color-gray-300-rgb), 0.2);
  --color-secondary-active: rgba(var(--color-gray-300-rgb), 0.25);
  --color-border: rgba(var(--color-primary-rgb), 0.22);
  --color-btn-primary-text: var(--color-cream-50);
  --color-card-border: rgba(var(--color-primary-rgb), 0.13);
  --color-card-border-inner: rgba(var(--color-primary-rgb), 0.13);
  --color-error: var(--color-orange-500);
  --color-success: var(--color-primary);
  --color-warning: var(--color-orange-500);
  --color-info: var(--color-gray-300);
  --color-focus-ring: rgba(179,80,80,0.44);
  --color-select-caret: rgba(70,30,30,0.8);
}

/* Base styles */
html {
  font-size: var(--font-size-base, 14px);
  font-family: var(--font-family-base, "FKGroteskNeue", "Geist", "Inter", -apple-system,
    BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif);
  line-height: var(--line-height-normal, 1.5);
  color: var(--color-text);
  background-color: var(--color-background);
  -webkit-font-smoothing: antialiased;
  box-sizing: border-box;
}

body {
  margin: 0;
  padding: 0;
}

*,
*::before,
*::after {
  box-sizing: inherit;
}

/* Frosted glass effect for the fixed header */
.header {
  background: rgba(255,255,255,0.25); /* fallback, will be overridden by variable below */
  background: rgba(var(--color-surface, 255,255,253), 0.25);
  backdrop-filter: blur(18px) saturate(180%);
  -webkit-backdrop-filter: blur(18px) saturate(180%);
  border-bottom: 1px solid rgba(var(--color-border, 179,80,80), 0.35);
  transition: all var(--duration-normal, 250ms) var(--ease-standard, cubic-bezier(0.16, 1, 0.3, 1));
}

/* Dark mode specific adjustments for better contrast */
@media (prefers-color-scheme: dark) {
  .header {
    background: rgba(var(--color-charcoal-800, 31,15,15), 0.3);
    border-bottom: 1px solid rgba(var(--color-gray-400-rgb, 168,75,75), 0.4);
  }
}

[data-color-scheme="dark"] .header {
  background: rgba(var(--color-charcoal-800, 31,15,15), 0.3);
  border-bottom: 1px solid rgba(var(--color-gray-400-rgb, 168,75,75), 0.4);
}

[data-color-scheme="light"] .header {
  background: rgba(var(--color-cream-100, 255,255,253), 0.25);
  border-bottom: 1px solid rgba(var(--color-primary-rgb, 179,80,80), 0.35);
}

/* Slightly stronger background when the page is scrolled so text remains readable */
.header.scrolled {
  background: rgba(var(--color-surface, 255,255,253), 0.35);
}

/* Dark mode scrolled state */
@media (prefers-color-scheme: dark) {
  .header.scrolled {
    background: rgba(var(--color-charcoal-800, 31,15,15), 0.4);
  }
}

[data-color-scheme="dark"] .header.scrolled {
  background: rgba(var(--color-charcoal-800, 31,15,15), 0.4);
}

[data-color-scheme="light"] .header.scrolled {
  background: rgba(var(--color-cream-100, 255,255,253), 0.35);
}

/* Mobile slide-down menu inherits the same glassmorphism */
@media (max-width: 768px) {
  .nav__menu {
    background: rgba(var(--color-surface, 255,255,253), 0.25);
    backdrop-filter: blur(18px) saturate(180%);
    -webkit-backdrop-filter: blur(18px) saturate(180%);
    border-bottom: 1px solid rgba(var(--color-border, 179,80,80), 0.3);
  }
}

/* Dark mode mobile menu */
@media (max-width: 768px) and (prefers-color-scheme: dark) {
  .nav__menu {
    background: rgba(var(--color-charcoal-800, 31,15,15), 0.3);
    border-bottom: 1px solid rgba(var(--color-gray-400-rgb, 168,75,75), 0.35);
  }
}

@media (max-width: 768px) {
  [data-color-scheme="dark"] .nav__menu {
    background: rgba(var(--color-charcoal-800, 31,15,15), 0.3);
    border-bottom: 1px solid rgba(var(--color-gray-400-rgb, 168,75,75), 0.35);
  }

  [data-color-scheme="light"] .nav__menu {
    background: rgba(var(--color-cream-100, 255,255,253), 0.25);
    border-bottom: 1px solid rgba(var(--color-primary-rgb, 179,80,80), 0.3);
  }
}

/* Additional mobile portrait breakpoint at 480px */
@media (max-width: 480px) {
  .nav__menu {
    background: rgba(var(--color-surface, 255,255,253), 0.3);
    backdrop-filter: blur(16px) saturate(170%);
    -webkit-backdrop-filter: blur(16px) saturate(170%);
    border-bottom: 1px solid rgba(var(--color-border, 179,80,80), 0.35);
  }
}

/* Dark mode mobile portrait */
@media (max-width: 480px) and (prefers-color-scheme: dark) {
  .nav__menu {
    background: rgba(var(--color-charcoal-800, 31,15,15), 0.35);
    border-bottom: 1px solid rgba(var(--color-gray-400-rgb, 168,75,75), 0.4);
  }
}

@media (max-width: 480px) {
  [data-color-scheme="dark"] .nav__menu {
    background: rgba(var(--color-charcoal-800, 31,15,15), 0.35);
    border-bottom: 1px solid rgba(var(--color-gray-400-rgb, 168,75,75), 0.4);
  }

  [data-color-scheme="light"] .nav__menu {
    background: rgba(var(--color-cream-100, 255,255,253), 0.3);
    border-bottom: 1px solid rgba(var(--color-primary-rgb, 179,80,80), 0.35);
  }
}

/* Ensure dropdown cart keeps its existing solid surface for clarity */
.cart-dropdown {
  background: var(--color-surface);
}